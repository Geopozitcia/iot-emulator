# IoT Emulator

### NAME
IoT Emulator - эмулятор умного дома, реализующий датичк температуры, контроллеры света и сервер-обработчик.

### SYNOPSIS 
Исполняемые файлы находятся в директории /bin. Для запуска необходимы права супер-пользователя.
- `server -a <IP-address> [-e]`
- `temperature_sensor -n <name> [-e] [-p <port>]`
- `light_controller -a <local_IP> -n <name> [-e]`

### BUILDING 
Для сборки проекта используйте утилиту `make`.

### DESCRIPTION
Проект реализует распределённую систему эмуляции IoT-устройств (датчиков и исполнительных механизмов) с взаимодействием через локальную сеть, с использованием протоколов TCP/UDP. Система поддерживает шифрование XOR.
Система состоит из трёх типов программ, каждая из которых выполняется как отдельный процесс:

**Датчик температуры (TS)** - генерирует случайные значения температуры (в диапазоне 20–35°C) и отправляет их на сервер раз в 1 секунду. Для передачи данных используется UDP, данные передаются в пакетах JSON формата.<br>
При использовании доступны следующие флаги:

    - [-n] - позволяет дать датичку название. По умолчанию датичк получает имя `temp1`. 
    - [-e] - включает режим шифрования пакетов. Доступно при запуске сервера с шифрованием.
    - [-p] - позволяет задать конкретный порт для датичка температуры. Без этого флага порт выдается автоматически.

**Контроллер света (LC)** - Упраляет состоянием света (включает и выключает лампы). Состояние хранится в битовой маске.
Для соединенеия использует TCP, общается с сервером используя JSON пакеты.
При использовании доступны следующие флаги:

    - [-n] - обязывет дать контроллеру название.
    - [-e] - включает режим шифрования пакетов. Доступно при запуске сервера с шифрованием.
    - [-a] - обязывает задать IP адресс устройству.

**Сервер (S)** - связывает LS и TS между собой. Обрабатывает показания температуры и управляет контроллерами света. При перегреве (температуры свыше 34.5°C) отключает светильники. CLI интерфейс позволяет посмотреть список подключенных устройств и управлять контроллерами света:
```text
1: Показать все TCP-устройства.
2: Показать все UDP-устройства.
3: Установить состояние света (выберите ID, номер света, вкл/выкл).
4: Выход.
```
При использовании доступны следующие флаги:

    - [-e] - включает режим шифрования пакетов.
    - [-a] - обязывает задать IP адресс устройству.
Лог работы сервера можно посмотреть в файле /log/server.log. Файл перезаписывается по достижению 100 строк.

### USER INTERFACE 
Для просмотра статистики, изменения температуры, процента используемого света и количества устройств можно воспользоватся Telegram-ботом.

### REQUESTS
Для запуска необходим компилятор GCC с поддержкой стандарта C11 и операционная система Linux. Программа работает на архитектурах x86 и aarch64.


### COPYRIGHT
2025, подготовлено в качестве итогового проекта для курса "Embededed Systems" - Eltex.
Работоспособность не гарантируется.
